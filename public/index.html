<!DOCTYPE HTML>
<html xmlns:height="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Medieval TD - ALPHA v0.11</title>

    <link rel="stylesheet" href="libs/pure-min.css">
    <link href="style/menu.css" rel="stylesheet">
    <link href="style/main.css" rel="stylesheet">

    <!--CDN for the Google reCaptcha js source file -->
    <script src="https://www.google.com/recaptcha/api.js?onload=loadCaptcha&render=explicit" async defer></script>

    <!-- Adding jQuery and jQuery UI(latter via CDN) -->
    <script src="libs/jquery-1.11.3.min.js"></script>
    <script src="libs/jqueryUi/jquery-ui.min.js"></script>
    <link href="libs/jqueryUi/jquery-ui.css" rel="stylesheet">

    <!--Loading the main framework files, also some backend stuff -->
    <script src="libs/phaser.js"></script>
    <!--<script src="libs/phaser_pathfinding-0.2.0.js"></script>-->
    <!--<script src="libs/easystar-0.2.0.min.js"></script>-->
    <script src="game/Player.js"></script>
    <script src="libs/validator.min.js"></script>

    <!--Loading the helper files -->
    <script src="processing/forms.js"></script>
    <script src="processing/helpers.js"></script>
    <script src="processing/helperss.js"></script>

    <!-- Loading the js files for the different states -->
    <script src="states/Boot.js"></script>
    <script src="states/Preloader.js"></script>
    <script src="states/LoginMenu.js"></script>
    <script src="states/RegisterMenu.js"></script>
    <script src="states/MainMenu.js"></script>
    <script src="states/Game.js"></script>
    <script src="states/SettingsMenu.js"></script>
    <script src="states/ForgotPasswordMenu.js"></script>
    <script src="states/BuyMenu.js"></script>
    <script src="states/AchievementMenu.js"></script>
    <script src="states/RankingMenu.js"></script>
    <script src="states/LevelSelector.js"></script>


    <script src="game/Enemy1.js"></script>
    <script src="game/Enemy2.js"></script>
    <script src="game/NewEnemy1.js"></script>
    <script src="game/NewEnemy2.js"></script>
    <script src="game/NewEnemy3.js"></script>
    <script src="game/NewEnemy4.js"></script>
    <script src="game/NewEnemy5.js"></script>
    <script src="game/Wave1.js"></script>
    <script src="game/Wave2.js"></script>
    <script src="game/Wave3.js"></script>
    <script src="game/Wave4.js"></script>
    <script src="game/Wave5.js"></script>
    <script src="game/Wave6.js"></script>
    <script src="game/Wave7.js"></script>
    <script src="game/Wave8.js"></script>
    <script src="game/Wave9.js"></script>
    <script src="game/Wave10.js"></script>
    <script src="game/Wave11.js"></script>
    <script src="game/Wave12.js"></script>
    <script src="game/Wave13.js"></script>
    <script src="game/Tower1.js"></script>
    <script src="game/Tower2.js"></script>
    <script src="game/Tower3.js"></script>
    <script src="game/Tower4.js"></script>

    <script src="states/Level1.js"></script>
    <script src="states/Level2.js"></script>
    <script src="states/Level3.js"></script>

</head>
<body>

<div class="wrapper">

    <div id="gameContainer"></div>

    <div id="formWrapper">

        <div id="loginArea" class="invisible formBody">
            <h1>Login</h1>
            <p>Enter your data: <span id="responseLogin"></span></p>

            <div class="pure-form pure-form-stacked innerForm">
                <form method="POST" action="/login">
                    <input type="text" name="username" placeholder="Username or Email">
                    <input type="password" name="password" placeholder="Password">
                </form>
                <a id="forgotPasswordLink" href=#>Forgot password</a><br>
                <a id="registerLink" href=#>Register</a>
            </div>
        </div>

        <!--<div class="userInfo"></div>-->

        <div id="registerArea" class="invisible formBody">
            <h1>Registration</h1>

            <p>Enter your data: <span id="responseRegister"></span></p>

            <div class="pure-form pure-form-stacked innerForm">
                <form method="POST" action="/signup">
                    <input type="text" name="registerUsername" placeholder="Username">
                    <input type="text" name="registerEmail" placeholder="Email">
                    <input type="password" name="registerPassword" placeholder="Password">
                    <input type="password" name="registerConfirmPassword" placeholder="Confirm Password">
                </form>
            </div>
        </div>

        <div id="forgotPasswordArea" class="invisible formBody">
            <h1>Forgot your Password?</h1>

            <p>Enter your Email-address in order to receive a new password.</p>

            <div class="pure-form pure-form-stacked innerForm">
                <form method="POST" action="forgotPW">
                    <input type="text" name="forgotPasswordEmail" placeholder="Email">
                </form>
            </div>
        </div>

        <div id="changePWArea" class="invisible formBody">
            <h1>Change Password</h1>

            <p>Enter your data: <span id="responseChangePW"></span></p>

            <div class="pure-form pure-form-stacked innerForm">
                <form method="POST" action="changePW">
                    <input type="password" name="changePWOldPassword" placeholder="Old password">
                    <input type="password" name="changePWNewPassword" placeholder="New password">
                    <input type="password" name="changePWNewPasswordConfirm" placeholder="New password">
                </form>
            </div>
        </div>

        <div id="settingsMenu" class="invisible">
            <table>
                <tr>
                    <div id="sliderMusic"></div>
                </tr>
                <tr>
                    <div style="height: 124px">
                    </div>
                </tr>

                <tr>
                    <div id="sliderSound"></div>
                </tr>
            </table>
        </div>

        <div id="popupSlider" class="invisible">
            <table>
                <tr>
                    <div id="popupMusic"></div>
                </tr>
                <tr>
                    <div style="height: 50px">
                    </div>
                </tr>

                <tr>
                    <div id="popupSound"></div>
                </tr>
            </table>
        </div>

        <div id="rankingTable" class="invisible">
            <table border="0" width="500" align="center">
                <tr>
                    <td>
                        <p><b>NAME</b></p>
                    </td>
                    <td>
                        <p><b>SCORE</b></p>
                    </td>
                </tr>
                <tr>
                    <td id="easyNamePlace1">
                        Player1
                    </td>
                    <td id="easyScorePlace1">
                        2674
                    </td>
                </tr>
                <tr>
                    <td id="easyNamePlace2">
                        Player2
                    </td>
                    <td id="easySorePlace2">
                        1337
                    </td>
                </tr>
            </table>
        </div>

    </div>

</div>

<!-- rendering the captcha -->
<!--
<script type='text/javascript'>
    var captchaContainer = null;
    loadCaptcha = function () {
        captchaContainer = grecaptcha.render('captcha_container', {
            'sitekey': '6LeBSwgTAAAAAMOYTY-lEdVzRMnmvPIVLNSj75b8',
            'callback': function (response) {
                console.log(response);

                $.ajax({
                    method: 'post',
                    url: '/verify',
                    dataType: "text",
                    data: response
                }).always(function (data, status, err) {
                    console.log(status);
                    console.log(err);
                });

            }
        });
    };
</script>
-->

<!-- form which contains the captcha -->
<form id="captchaForm" action="/verify" method="POST">
    <div id="captcha_container" class="invisible"></div>
</form>


<script type="text/javascript">

    $(function () {
        // Initialize new Phaser.Game
        var game = new Phaser.Game(canvasWidth, canvasHeight, Phaser.AUTO, 'gameContainer');

        // Add all states of the game
        game.state.add('Boot', Menu.Boot);
        game.state.add('Preloader', Menu.Preloader);
        game.state.add('LoginMenu', Menu.LoginMenu);
        game.state.add('RegisterMenu', Menu.RegisterMenu);
        game.state.add('MainMenu', Menu.MainMenu);
        game.state.add('Game', Menu.Game);
        game.state.add('SettingsMenu', Menu.SettingsMenu);
        game.state.add('ForgotPasswordMenu', Menu.ForgotPasswordMenu);
        game.state.add('RankingMenu', Menu.RankingMenu);
        game.state.add('BuyMenu', Menu.BuyMenu);
        game.state.add('AchievementMenu', Menu.AchievementMenu);
        game.state.add('LevelSelector', Menu.LevelSelector);
        game.state.add('Level1', Menu.Level1);
        game.state.add('Level2', Menu.Level2);
        game.state.add('Level3', Menu.Level3);
        //Start game with boot state
        game.state.start('Boot');


        // Listen for link click events (forgot password, register)
        $("#forgotPasswordLink").click(function () {
            var fp = new FormProcessing();
            fp.hideLoginForm();
            game.state.start('ForgotPasswordMenu');
        });

        $("#registerLink").click(function () {
            var fp = new FormProcessing();
            fp.hideLoginForm();
            game.state.start('RegisterMenu');
        });
    });


</script>

</body>
</html>